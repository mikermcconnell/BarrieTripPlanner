# Copy this file to .env and add your actual API keys

# LocationIQ API Key (used by proxy-server.js — NOT exposed to client when proxy is set)
# Get your key at: https://locationiq.com/
EXPO_PUBLIC_LOCATIONIQ_API_KEY=YOUR_LOCATIONIQ_API_KEY_HERE

# API Proxy URL — routes LocationIQ calls through server to hide API key
# For dev: http://localhost:3001 (run `node proxy-server.js`)
# For production: your deployed proxy URL
EXPO_PUBLIC_API_PROXY_URL=http://localhost:3001
# Optional shared token sent to hardened api-proxy deployments
EXPO_PUBLIC_API_PROXY_TOKEN=

# Optional dedicated CORS proxy base used for GTFS web fetches.
# Accepts either a full ".../proxy?url=" value or a base URL ("/proxy?url=" will be appended).
EXPO_PUBLIC_CORS_PROXY_URL=http://localhost:3001/proxy?url=
# Optional shared token sent to private CORS proxy deployments
EXPO_PUBLIC_CORS_PROXY_TOKEN=

# Optional: allow public third-party CORS proxy fallbacks on web.
# Default false to avoid unreliable 403/rate-limit behavior.
EXPO_PUBLIC_ENABLE_PUBLIC_CORS_PROXIES=false

# App kill switch for auto-detected detours (set true to enable)
EXPO_PUBLIC_ENABLE_AUTO_DETOURS=false

# Optional OpenTripPlanner backend URL for OTP fallback routing
# Example: https://your-otp.example.com/otp/routers/default
EXPO_PUBLIC_OTP_URL=

# Google Maps API Key
# Get your key from: https://console.cloud.google.com/google/maps-apis
EXPO_PUBLIC_GOOGLE_MAPS_API_KEY=YOUR_GOOGLE_MAPS_API_KEY_HERE

# Firebase Configuration
# Get these from: https://console.firebase.google.com/ > Project Settings > Your apps
EXPO_PUBLIC_FIREBASE_API_KEY=YOUR_FIREBASE_API_KEY
EXPO_PUBLIC_FIREBASE_AUTH_DOMAIN=your-project.firebaseapp.com
EXPO_PUBLIC_FIREBASE_PROJECT_ID=your-project-id
EXPO_PUBLIC_FIREBASE_STORAGE_BUCKET=your-project.appspot.com
EXPO_PUBLIC_FIREBASE_MESSAGING_SENDER_ID=123456789
EXPO_PUBLIC_FIREBASE_APP_ID=1:123456789:web:abcdef
EXPO_PUBLIC_FIREBASE_MEASUREMENT_ID=G-XXXXXXXXXX

# Sentry Crash Reporting
# Get your DSN from: https://sentry.io > Project Settings > Client Keys (DSN)
EXPO_PUBLIC_SENTRY_DSN=https://your-dsn@sentry.io/your-project-id

# ===============================================
# Backend Detour Worker (api-proxy) Configuration
# ===============================================
# API auth hardening for proxy routes (/api/*)
REQUIRE_API_AUTH=true
# Use one token or multiple comma-separated tokens
API_PROXY_TOKEN=change-me
# API_PROXY_TOKENS=token1,token2
# Optional Firebase ID token auth (requires Admin SDK credentials)
REQUIRE_FIREBASE_AUTH=false

# Enable server-side detour detection worker in api-proxy
DETOUR_WORKER_ENABLED=false

# Optional tuning (milliseconds / counts)
DETOUR_POLL_INTERVAL_MS=15000
DETOUR_STATIC_REFRESH_MS=21600000
DETOUR_EVIDENCE_WINDOW_MS=1800000
DETOUR_MIN_ROUTE_EVIDENCE=8
DETOUR_MIN_UNIQUE_VEHICLES=2
DETOUR_OFF_ROUTE_THRESHOLD_METERS=75

# Optional key for POST /api/detours/refresh
DETOUR_PROXY_KEY=change-me

# Firebase Admin credentials for api-proxy worker writes
# Option A: Inline JSON string
FIREBASE_SERVICE_ACCOUNT_JSON={"type":"service_account","project_id":"your-project-id","private_key_id":"...","private_key":"-----BEGIN PRIVATE KEY-----\\n...\\n-----END PRIVATE KEY-----\\n","client_email":"...","client_id":"...","auth_uri":"https://accounts.google.com/o/oauth2/auth","token_uri":"https://oauth2.googleapis.com/token","auth_provider_x509_cert_url":"https://www.googleapis.com/oauth2/v1/certs","client_x509_cert_url":"..."}

# Option B: Path to service account file
# GOOGLE_APPLICATION_CREDENTIALS=C:\\path\\to\\service-account.json
